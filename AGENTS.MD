# AGENTS.MD - Gu√≠a de Desarrollo para ngiudi-hue-ds

## üìã Informaci√≥n General

Este documento contiene las reglas de programaci√≥n, convenciones y gu√≠as para desarrolladores que trabajen en el Design System **ngiudi-hue-ds**. Todas las reglas han sido deducidas del an√°lisis del c√≥digo existente y deben ser seguidas para mantener la consistencia del proyecto.

---

## üèóÔ∏è ARQUITECTURA Y ESTRUCTURA

### Estructura de Componentes
Cada componente debe seguir esta estructura obligatoria:

```
src/components/ComponentName/
‚îú‚îÄ‚îÄ ComponentName.jsx          # Componente principal
‚îú‚îÄ‚îÄ ComponentName.styles.js    # Estilos con styled-components
‚îú‚îÄ‚îÄ ComponentName.stories.jsx  # Documentaci√≥n Storybook
‚îî‚îÄ‚îÄ ComponentName.docs.jsx     # Documentaci√≥n extendida (opcional)
```

**Ejemplo:**
```jsx
// Box/Box.jsx
import React from "react";
import PropTypes from "prop-types";
import { Wrapper } from "./Box.styles";

const DEFAULT_PROPS = {
  children: null,
  margin: "a-0",
  padding: "a-0",
};

export const Box = (props) => {
  const attrs = merge({}, DEFAULT_PROPS, props);

  return (
    <Wrapper $margin={attrs.margin} $padding={attrs.padding}>
      {attrs.children}
    </Wrapper>
  );
};
```

### Separaci√≥n de Responsabilidades
- **`.jsx`**: L√≥gica del componente, props, validaciones
- **`.styles.js`**: Todos los estilos usando styled-components
- **`.stories.jsx`**: Documentaci√≥n y ejemplos para Storybook
- **`.docs.jsx`**: Documentaci√≥n extendida (cuando sea necesario)

### Patr√≥n de Composici√≥n
Para componentes complejos, usar patr√≥n de composici√≥n:

```jsx
// Grid/Grid.jsx
import { GridItem } from "./components/GridItem";
import { GridWrapper } from "./components/GridWrapper";

export const Grid = {
  Container: GridWrapper,
  Item: GridItem,
};

// Uso:
// <Grid.Container>
//   <Grid.Item>Content</Grid.Item>
// </Grid.Container>
```

### Organizaci√≥n del Tema
El directorio `/theme` debe contener archivos espec√≠ficos:
- `colors.js` - Paleta de colores y tokens
- `typography.js` - Tipos de texto y estilos
- `icons.js` - Iconos del sistema
- `spacing.js` - Sistema de espaciado
- `breakpoints.js` - Puntos de quiebre responsivos
- `shadows.js` - Sombras del sistema
- `animations.js` - Animaciones y transiciones

---

## üíª CONVENCIONES DE C√ìDIGO

### 1. PropTypes Obligatorios
**REGLA**: Todo componente DEBE incluir PropTypes para validaci√≥n.

```jsx
import PropTypes from "prop-types";

export const Component = (props) => {
  // ... l√≥gica del componente
};

Component.propTypes = {
  children: PropTypes.node,
  margin: PropTypes.string,
  padding: PropTypes.string,
  onClick: PropTypes.func,
};
```

### 2. Patr√≥n DEFAULT_PROPS
**REGLA**: Usar constante `DEFAULT_PROPS` para valores por defecto.

```jsx
const DEFAULT_PROPS = {
  children: null,
  margin: "a-0",
  padding: "a-0",
  color: "black",
};

export const Component = (props) => {
  const attrs = merge({}, DEFAULT_PROPS, props);
  // usar attrs en lugar de props
};
```

### 3. Prefijo $ para Styled-Components
**REGLA**: Todas las props pasadas a styled-components deben tener prefijo `$`.

```jsx
// ‚úÖ CORRECTO
<Wrapper $margin={attrs.margin} $padding={attrs.padding}>

// ‚ùå INCORRECTO  
<Wrapper margin={attrs.margin} padding={attrs.padding}>
```

### 4. Naming Conventions
- **Componentes**: PascalCase (`Box`, `GridWrapper`, `IconItem`)
- **Props**: camelCase (`margin`, `padding`, `onClick`)
- **Archivos**: PascalCase para componentes, camelCase para utilities
- **Styled Components**: PascalCase (`Wrapper`, `IconItem`, `TextWrapper`)

---

## üé® ESTILOS Y STYLING

### 1. Styled-Components como Librer√≠a Principal
**REGLA**: Usar exclusivamente styled-components para estilos.

```jsx
// ComponentName.styles.js
import styled, { css } from "styled-components";

export const Wrapper = styled("div")`
  ${(props) => css`
    ${marginProperties(props)}
    ${paddingProperties(props)}
  `}
`;
```

### 2. Sistema de Spacing Unificado
**REGLA**: Usar formato `"direction-value"` para spacing.

- `a-{value}`: all (todos los lados)
- `x-{value}`: horizontal (left + right)
- `y-{value}`: vertical (top + bottom)  
- `t-{value}`: top
- `b-{value}`: bottom
- `l-{value}`: left
- `r-{value}`: right

```jsx
// Ejemplos v√°lidos:
margin="a-0"        // margin: 0px all sides
margin="x-16 y-8"   // margin: 8px 16px
padding="t-4 b-8"   // padding-top: 4px; padding-bottom: 8px
```

### 3. Tokens de Dise√±o
**REGLA**: Usar siempre tokens del tema, nunca valores hardcodeados.

```jsx
// ‚úÖ CORRECTO
color="primary.main"
color="error.light"
size="major"

// ‚ùå INCORRECTO
color="#FF0000"
fontSize="16px"
```

### 4. Estructura de Exportaci√≥n de Estilos
**REGLA**: Exportar styled-components bajo objeto `Styles` o nombre descriptivo.

```jsx
// Icon.styles.js
export const Styles = {
  IconWrapper: styled("div")`...`,
  IconItem: styled("svg")`...`,
};

// O para componentes simples:
export const Wrapper = styled("div")`...`;
```

---

## ‚ö° VALIDACIONES Y ERROR HANDLING

### 1. Validaci√≥n Defensiva
**REGLA**: Validar existencia de tokens/props antes de usar.

```jsx
// Validaci√≥n de iconos
const iconData = icons[attrs.name];
if (!iconData) { 
  console.warn(`Icon "${attrs.name}" not found`);
  return null;
}

// Validaci√≥n de typography
if (!typography[attrs.type]) {
  console.warn(`Typography type "${attrs.type}" not found. Using default "bodyRegular".`);
  attrs.type = "bodyRegular";
}
```

### 2. Console.warn para Debugging
**REGLA**: Usar `console.warn` para alertar sobre props incorrectas, con fallbacks seguros.

```jsx
// ‚úÖ CORRECTO: Warning + fallback
if (!validValue) {
  console.warn(`Invalid prop value. Using fallback.`);
  value = fallbackValue;
}

// ‚ùå INCORRECTO: Error sin fallback
if (!validValue) {
  throw new Error("Invalid prop");
}
```

### 3. Manejo de Props Undefined/Null
**REGLA**: Manejar defensivamente props undefined/null.

```jsx
const DEFAULT_PROPS = {
  children: null,  // Valor por defecto expl√≠cito
  onClick: null,   // Funciones pueden ser null
  data: {},        // Objetos deben tener fallback
};
```

---

## üìö TESTING Y DOCUMENTACI√ìN

### 1. Storybook como Documentaci√≥n Principal
**REGLA**: Todo componente DEBE tener archivo `.stories.jsx`.

```jsx
// Component.stories.jsx
import React from "react";
import { Component } from "./Component";

const meta = {
  title: "Components/Component",
  component: Component,
  argTypes: {
    prop: {
      control: { type: "text" },
      description: "Descripci√≥n en espa√±ol de la prop.",
    },
  },
};

export default meta;
```

### 2. ArgTypes Detallados
**REGLA**: Incluir `description` en espa√±ol y `control` apropiado para cada prop.

```jsx
argTypes: {
  color: {
    control: { type: "text" },
    description: "Define el color del componente. Acepta tokens de color del tema.",
  },
  size: {
    control: { type: "select" },
    options: ["small", "medium", "large"],
    description: "Especifica el tama√±o del componente.",
  },
  onClick: {
    action: "clicked",
    control: { type: "none" },
    description: "Funci√≥n callback ejecutada al hacer clic.",
  },
}
```

### 3. Documentaci√≥n en Espa√±ol
**REGLA**: Toda documentaci√≥n user-facing debe estar en espa√±ol.

---

## üîß LINTING Y FORMATTING

### Reglas de ESLint Obligatorias

```javascript
// eslint.config.js
rules: {
  "eol-last": ["error", "never"],                    // No newline al final
  "quotes": ["error", "double"],                     // Comillas dobles obligatorias
  "no-multiple-empty-lines": ["error", { "max": 1, "maxEOF": 0 }],
  "semi": ["error", "always"],                       // Semicolons obligatorios
}
```

### Convenciones de Formato
- **Comillas**: Siempre comillas dobles (`"text"`)
- **Semicolons**: Obligatorios al final de statements
- **L√≠neas vac√≠as**: M√°ximo 1 l√≠nea vac√≠a consecutiva
- **EOF**: No newline al final del archivo
- **Imports**: Orden alfab√©tico, imports absolutos desde `src`

---

## üì¶ DEPENDENCIAS Y TOOLING

### Stack Tecnol√≥gico Principal
- **React**: 19+ (obligatorio)
- **Styled-Components**: 6+ (obligatorio) 
- **PropTypes**: Para validaci√≥n (obligatorio)
- **Storybook**: 9+ para documentaci√≥n (obligatorio)

### Herramientas de Build
- **Vite**: Como bundler principal
- **Babel**: Para transpilaci√≥n
- **ESLint**: Para linting con configuraci√≥n custom

### Deployment
- **GitHub Pages**: Para deploy autom√°tico de Storybook
- **NPM Scripts**: Usar scripts definidos en package.json

```bash
npm run start          # Desarrollo con Storybook
npm run build          # Build para producci√≥n  
npm run deploy         # Deploy a GitHub Pages
npm run lint           # Ejecutar linting
```

---

## ‚úÖ CHECKLIST DE REVISI√ìN

Antes de hacer commit, verificar:

- [ ] Componente tiene archivo `.jsx`, `.styles.js` y `.stories.jsx`
- [ ] PropTypes definidos para todas las props
- [ ] DEFAULT_PROPS constante implementada
- [ ] Props de styled-components tienen prefijo `$`
- [ ] Tokens de tema usados en lugar de valores hardcodeados
- [ ] Sistema de spacing seguido correctamente
- [ ] Validaciones defensivas implementadas
- [ ] Console.warns para debugging cuando corresponda
- [ ] Documentaci√≥n en Storybook con descriptions en espa√±ol
- [ ] ESLint sin errores
- [ ] Imports organizados alfab√©ticamente
- [ ] Props organizados alfab√©ticamente

---

## üö´ ANTI-PATRONES A EVITAR

### ‚ùå No hacer:
```jsx
// Valores hardcodeados
<Component style={{color: "#FF0000", margin: "10px"}} />

// Props sin validaci√≥n
export const Component = (props) => {
  return <div>{props.children}</div>;
};

// Styled-components sin prefijo $
<Wrapper margin={spacing} color={theme} />

// L√≥gica de estilos en el componente
const Component = () => {
  const styles = {color: "red"}; // ‚ùå
  return <div style={styles}>Content</div>;
};
```

### ‚úÖ Hacer:
```jsx
// Tokens del tema
<Component color="primary.main" margin="a-16" />

// Props con validaci√≥n
Component.propTypes = {
  children: PropTypes.node,
};

// Styled-components con prefijo $
<Wrapper $margin={spacing} $color={theme} />

// Estilos separados
const Wrapper = styled.div`
  color: ${props => props.theme.colors.primary.main};
`;
```

---

Este documento debe ser actualizado cuando se introduzcan nuevos patrones o se modifiquen las convenciones existentes. Todos los desarrolladores deben familiarizarse con estas reglas antes de contribuir al proyecto.